<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>{{ title ?? 'MyApp' }}</title>
    {{ ['/assets/css/'] | bundleCss({ minify:debug, cache:!debug, disk:!debug }) }}
</head>
<body>
    <i hidden>{{ '/js/hot-loader.js'     | ifDebugIncludeScript }}</i>
    <i hidden>{{ '/js/hot-fileloader.js' | ifDebugIncludeScript }}</i>

    {{page}}

    {{ (debug ? '.development' : '.production.min') | assignTo: envjs }}
    {{ (debug ? '' : '.min') | assignTo: minjs }}
    {{ [
        `/lib/react/react${envjs}.js`,
        `/lib/react-dom/react-dom${envjs}.js`,
        `/lib/react-router-dom/react-router-dom${minjs}.js`,
        `/lib/classnames/index.js`,
    ] | bundleJs({ minify:!debug, cache:!debug, disk:!debug, out:'/js/lib.bundle.js' }) }}

    <script>
        var ALIASES = {
            'react': window.React,
            'react-dom': window.ReactDOM,
            'react-router-dom': window.ReactRouterDOM,
            'classnames': window.classNames
        };
        window.exports = {};
        window.require = function(name) {
            return ALIASES[name] || exports[name] || window[name] || exports;
        };
    </script>

    {{ [
        '/lib/@servicestack/client/index.js',
        'content:/src/components/',
        'content:/src/shared/',
        'content:/src/',
    ] | bundleJs({ minify:!debug, cache:!debug, disk:!debug, out:'/js/bundle.js' }) }}

    {{ scripts | raw }} 

</body>
</html>